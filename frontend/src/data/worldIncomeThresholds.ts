export type IncomeBasis = 'PPP' | 'MER';

export type IncomeThresholdPoint = Readonly<{
  /** Percentile (0â€“100). Example: 99.9 => threshold for top 0.1%. */
  p: number;
  /** Annual income threshold in USD (PPP-adjusted or market exchange rate depending on basis). */
  income: number;
}>;

/**
 * World income thresholds derived from WID.world bulk download files:
 * - https://wid.world/bulk_download/WID_data_WO-PPP.csv
 * - https://wid.world/bulk_download/WID_data_WO-MER.csv
 *
 * Variable: tptincj992 (Threshold, pre-tax national income; equal-split adults; age 20+).
 * Year: 2024 (latest available in the files at time of extraction).
 *
 * Notes:
 * - Values are annual and in USD (PPP vs MER depends on basis).
 * - Percentiles include 1% steps plus finer resolution in the top tail (0.1%, 0.01%, 0.001%).
 */
export const WORLD_INCOME_WID = {
  year: 2024 as const,
  variable: 'tptincj992',
  countryCodeByBasis: {
    PPP: 'WO-PPP',
    MER: 'WO-MER',
  } as const satisfies Record<IncomeBasis, string>,
  sourceFileByBasis: {
    PPP: 'https://wid.world/bulk_download/WID_data_WO-PPP.csv',
    MER: 'https://wid.world/bulk_download/WID_data_WO-MER.csv',
  } as const satisfies Record<IncomeBasis, string>,
} as const;

export const WORLD_INCOME_THRESHOLDS_USD: Record<IncomeBasis, ReadonlyArray<IncomeThresholdPoint>> = {
  PPP: [
    { p: 0, income: 0 },
    { p: 1, income: 50.5 },
    { p: 2, income: 239.9 },
    { p: 3, income: 519.6 },
    { p: 4, income: 785.8 },
    { p: 5, income: 1026.8 },
    { p: 6, income: 1257.8 },
    { p: 7, income: 1476.6 },
    { p: 8, income: 1685.4 },
    { p: 9, income: 1910 },
    { p: 10, income: 2138 },
    { p: 11, income: 2348.3 },
    { p: 12, income: 2548 },
    { p: 13, income: 2746.2 },
    { p: 14, income: 2927.5 },
    { p: 15, income: 3103.3 },
    { p: 16, income: 3289.9 },
    { p: 17, income: 3469.5 },
    { p: 18, income: 3640.4 },
    { p: 19, income: 3815.5 },
    { p: 20, income: 3988.6 },
    { p: 21, income: 4156.7 },
    { p: 22, income: 4313.5 },
    { p: 23, income: 4465.9 },
    { p: 24, income: 4624 },
    { p: 25, income: 4798.7 },
    { p: 26, income: 4979.5 },
    { p: 27, income: 5154.9 },
    { p: 28, income: 5323.1 },
    { p: 29, income: 5495.5 },
    { p: 30, income: 5707.8 },
    { p: 31, income: 5917.7 },
    { p: 32, income: 6117.2 },
    { p: 33, income: 6330 },
    { p: 34, income: 6552.2 },
    { p: 35, income: 6787.3 },
    { p: 36, income: 7012.6 },
    { p: 37, income: 7229.6 },
    { p: 38, income: 7481.6 },
    { p: 39, income: 7756.2 },
    { p: 40, income: 8018.5 },
    { p: 41, income: 8293.1 },
    { p: 42, income: 8578 },
    { p: 43, income: 8859.2 },
    { p: 44, income: 9157.3 },
    { p: 45, income: 9477.2 },
    { p: 46, income: 9809.8 },
    { p: 47, income: 10143.1 },
    { p: 48, income: 10506.1 },
    { p: 49, income: 10886.5 },
    { p: 50, income: 11249 },
    { p: 51, income: 11655 },
    { p: 52, income: 12098 },
    { p: 53, income: 12552 },
    { p: 54, income: 13020.2 },
    { p: 55, income: 13488.9 },
    { p: 56, income: 13971.1 },
    { p: 57, income: 14486.7 },
    { p: 58, income: 15071.1 },
    { p: 59, income: 15686.6 },
    { p: 60, income: 16387.1 },
    { p: 61, income: 17136.1 },
    { p: 62, income: 17846.9 },
    { p: 63, income: 18540.4 },
    { p: 64, income: 19295.6 },
    { p: 65, income: 20179.6 },
    { p: 66, income: 21115.2 },
    { p: 67, income: 22027.1 },
    { p: 68, income: 22868.7 },
    { p: 69, income: 23702.6 },
    { p: 70, income: 24649.5 },
    { p: 71, income: 25713.7 },
    { p: 72, income: 26834.2 },
    { p: 73, income: 27979 },
    { p: 74, income: 29101.5 },
    { p: 75, income: 30165 },
    { p: 76, income: 31340.8 },
    { p: 77, income: 32745.4 },
    { p: 78, income: 34321.9 },
    { p: 79, income: 36000.3 },
    { p: 80, income: 37728.9 },
    { p: 81, income: 39544.6 },
    { p: 82, income: 41387.6 },
    { p: 83, income: 43509.4 },
    { p: 84, income: 45930.7 },
    { p: 85, income: 48306.8 },
    { p: 86, income: 50793.3 },
    { p: 87, income: 53840.8 },
    { p: 88, income: 57346.9 },
    { p: 89, income: 61151.1 },
    { p: 90, income: 65300.3 },
    { p: 91, income: 69826.4 },
    { p: 92, income: 75016.5 },
    { p: 93, income: 81307.1 },
    { p: 94, income: 89465.9 },
    { p: 95, income: 100624.1 },
    { p: 96, income: 115436.3 },
    { p: 97, income: 135666.8 },
    { p: 98, income: 172202.7 },
    { p: 99, income: 223044.7 },
    { p: 99.1, income: 257883.2 },
    { p: 99.2, income: 277587.7 },
    { p: 99.3, income: 294709.3 },
    { p: 99.4, income: 322061.6 },
    { p: 99.5, income: 363750.8 },
    { p: 99.6, income: 421610.6 },
    { p: 99.7, income: 496058.4 },
    { p: 99.8, income: 625658.9 },
    { p: 99.9, income: 819971 },
    { p: 99.91, income: 966266.3 },
    { p: 99.92, income: 1050195 },
    { p: 99.93, income: 1145835.5 },
    { p: 99.94, income: 1262251.4 },
    { p: 99.95, income: 1434245 },
    { p: 99.96, income: 1604899.8 },
    { p: 99.97, income: 1892264.8 },
    { p: 99.98, income: 2443959.5 },
    { p: 99.99, income: 3269237.8 },
    { p: 99.991, income: 3898778 },
    { p: 99.992, income: 4196664.5 },
    { p: 99.993, income: 4622705 },
    { p: 99.994, income: 5198297.5 },
    { p: 99.995, income: 5886908.5 },
    { p: 99.996, income: 6800980 },
    { p: 99.997, income: 8554894 },
    { p: 99.998, income: 12237920 },
    { p: 99.999, income: 36579548 },
  ],
  MER: [
    { p: 0, income: 0 },
    { p: 1, income: 15.3 },
    { p: 2, income: 76.4 },
    { p: 3, income: 179.2 },
    { p: 4, income: 275.8 },
    { p: 5, income: 349 },
    { p: 6, income: 417.5 },
    { p: 7, income: 492.3 },
    { p: 8, income: 561.6 },
    { p: 9, income: 624.9 },
    { p: 10, income: 683.2 },
    { p: 11, income: 738.9 },
    { p: 12, income: 792.8 },
    { p: 13, income: 842.1 },
    { p: 14, income: 890.1 },
    { p: 15, income: 936.5 },
    { p: 16, income: 985.4 },
    { p: 17, income: 1032.7 },
    { p: 18, income: 1078.5 },
    { p: 19, income: 1122.6 },
    { p: 20, income: 1166.4 },
    { p: 21, income: 1216.3 },
    { p: 22, income: 1267 },
    { p: 23, income: 1314.8 },
    { p: 24, income: 1364.1 },
    { p: 25, income: 1413.7 },
    { p: 26, income: 1466.9 },
    { p: 27, income: 1522 },
    { p: 28, income: 1578.6 },
    { p: 29, income: 1642.9 },
    { p: 30, income: 1703.9 },
    { p: 31, income: 1766.1 },
    { p: 32, income: 1832.8 },
    { p: 33, income: 1904.5 },
    { p: 34, income: 1979 },
    { p: 35, income: 2052.2 },
    { p: 36, income: 2128.5 },
    { p: 37, income: 2208.7 },
    { p: 38, income: 2300.7 },
    { p: 39, income: 2395.2 },
    { p: 40, income: 2491.9 },
    { p: 41, income: 2596.3 },
    { p: 42, income: 2705.8 },
    { p: 43, income: 2826.7 },
    { p: 44, income: 2958.4 },
    { p: 45, income: 3091.7 },
    { p: 46, income: 3229.3 },
    { p: 47, income: 3369 },
    { p: 48, income: 3517.3 },
    { p: 49, income: 3680.2 },
    { p: 50, income: 3843.8 },
    { p: 51, income: 4025.2 },
    { p: 52, income: 4242.6 },
    { p: 53, income: 4480.6 },
    { p: 54, income: 4715 },
    { p: 55, income: 4939.7 },
    { p: 56, income: 5205.5 },
    { p: 57, income: 5509.4 },
    { p: 58, income: 5800.2 },
    { p: 59, income: 6088 },
    { p: 60, income: 6423 },
    { p: 61, income: 6798 },
    { p: 62, income: 7173.1 },
    { p: 63, income: 7546.8 },
    { p: 64, income: 7949.2 },
    { p: 65, income: 8398.7 },
    { p: 66, income: 8867.5 },
    { p: 67, income: 9345.1 },
    { p: 68, income: 9838.3 },
    { p: 69, income: 10327.2 },
    { p: 70, income: 10876.7 },
    { p: 71, income: 11480.9 },
    { p: 72, income: 12096.5 },
    { p: 73, income: 12757.9 },
    { p: 74, income: 13450.1 },
    { p: 75, income: 14142.1 },
    { p: 76, income: 14846 },
    { p: 77, income: 15658.8 },
    { p: 78, income: 16550.6 },
    { p: 79, income: 17410.5 },
    { p: 80, income: 18354.4 },
    { p: 81, income: 19506.3 },
    { p: 82, income: 20814.4 },
    { p: 83, income: 22314.8 },
    { p: 84, income: 23854.4 },
    { p: 85, income: 25517.2 },
    { p: 86, income: 27424.8 },
    { p: 87, income: 29286 },
    { p: 88, income: 31616.4 },
    { p: 89, income: 34620.9 },
    { p: 90, income: 37954.4 },
    { p: 91, income: 41814.3 },
    { p: 92, income: 46258.5 },
    { p: 93, income: 51657.8 },
    { p: 94, income: 58256 },
    { p: 95, income: 66477.3 },
    { p: 96, income: 77295.2 },
    { p: 97, income: 92380.4 },
    { p: 98, income: 119323.1 },
    { p: 99, income: 154688.3 },
    { p: 99.1, income: 178348.2 },
    { p: 99.2, income: 190592.3 },
    { p: 99.3, income: 203810.1 },
    { p: 99.4, income: 221688.8 },
    { p: 99.5, income: 244616.2 },
    { p: 99.6, income: 272971.3 },
    { p: 99.7, income: 321082.1 },
    { p: 99.8, income: 415447 },
    { p: 99.9, income: 544801.8 },
    { p: 99.91, income: 641612.9 },
    { p: 99.92, income: 698370.3 },
    { p: 99.93, income: 742779.5 },
    { p: 99.94, income: 810316.7 },
    { p: 99.95, income: 933604.4 },
    { p: 99.96, income: 1095791.1 },
    { p: 99.97, income: 1334829.4 },
    { p: 99.98, income: 1776643.8 },
    { p: 99.99, income: 2211550.8 },
    { p: 99.991, income: 2540256 },
    { p: 99.992, income: 2918294.3 },
    { p: 99.993, income: 3298477.5 },
    { p: 99.994, income: 3676331.5 },
    { p: 99.995, income: 4134636.5 },
    { p: 99.996, income: 4929128 },
    { p: 99.997, income: 6303022 },
    { p: 99.998, income: 8688154 },
    { p: 99.999, income: 24732848 },
  ],
};

